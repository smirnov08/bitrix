# Получение корзины
```php
$basket = \Bitrix\Sale\Basket::loadItemsForFUser(

   //Получение ID покупателя (НЕ ID пользователя!)
   \Bitrix\Sale\Fuser::getId(),

   //Текущий сайт
   \Bitrix\Main\Context::getCurrent()->getSite()
);
```

# Получение корзины из заказа
```php
$orderId = 1;
// Получение корзины по ID заказа
$basket = \Bitrix\Sale\Order::load($orderId)->getBasket();

// Получение корзины по объекту заказа
$userId = 111;
$order = Order::create(\Bitrix\Main\Context::getCurrent()->getSite(), $userId);

$basket = \Bitrix\Sale\Basket::loadItemsForOrder($order);
```

# Добавление товара
```php
//количество
$quantity = 1;

//ID товара (торговый каталог)
$productId = 233;

// Получение корзины для текущего пользователя
$basket = \Bitrix\Sale\Basket::loadItemsForFUser(
   \Bitrix\Sale\Fuser::getId(), 
   \Bitrix\Main\Context::getCurrent()->getSite()
);

if ($item = $basket->getExistsItem('catalog', $productId)){

   //Обновление товара в корзине
   $item->setField('QUANTITY', $item->getQuantity() + $quantity);
}else{

   //Добавление товара
   $item = $basket->createItem('catalog', $productId);
   $item->setFields([
      'QUANTITY' => $quantity,
      'CURRENCY' => \Bitrix\Currency\CurrencyManager::getBaseCurrency(),
      'LID' => \Bitrix\Main\Context::getCurrent()->getSite(),
      'PRODUCT_PROVIDER_CLASS' => 'CCatalogProductProvider',
   ]);
}

//Сохранение изменений
$basket->save();
```

# Удаление товара
```php
$productId = 233;

//Получение корзины текущего пользователя
$basket = \Bitrix\Sale\Basket::loadItemsForFUser(
   \Bitrix\Sale\Fuser::getId(), 
   \Bitrix\Main\Context::getCurrent()->getSite()
);

// Получение товара корзины по ID товара
$basket->getItemById($productId)->delete();

//Сохранение изменений
$basket->save();
```

# Полезные ссылки
* [mr.cappuccino (РАБОТА С КОРЗИНОЙ В БИТРИКС D7)](https://mrcappuccino.ru/blog/post/work-with-basket-bitrix-d7)